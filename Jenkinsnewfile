pipeline {

   agent any
   
    tools {
  maven 'maven'
   }

    stages {
        stage ('checkout') {
          steps {
            echo ("this is checkout stage")
            checkout poll: false, scm: scmGit(branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/VenkatChekka/jenkins_pipeline_springboot_demo.git']])
           }
         }
        stage ('Build') {
          steps {
            echo ("This is Build Phase")
            sh 'mvn compile'
           } 
         }
        stage ('Test') {
          steps {
           echo ("This is test phase")
           sh 'mvn test'
          }
        }         
        stage ('Install') {
          steps {
           echo ("This is to Install the JAR file")
           sh 'mvn install'
           archiveArtifacts artifacts: 'target/calculator-0.0.1-SNAPSHOT.jar', followSymlinks: false
          }
        }         
    }
}
